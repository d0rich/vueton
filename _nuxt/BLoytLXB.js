import D from"./BnJzMbjz.js";import{s as b,O as F,Q as G,R as Q,T as h,U,q as B,V as O,i as Y,D as Z,W as H,Y as J,e as x,o as S,c as M,a as R,b as L,w as K,g as $,Z as X,n as N,t as ee,h as ne,r as te}from"./Bk4cXetx.js";function V(e){return G()?(Q(e),!0):!1}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const oe=Object.prototype.toString,se=e=>oe.call(e)==="[object Object]",A=()=>{},ue=ae();function ae(){var e,n;return T&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function ie(e){let n;function o(){return n||(n=e()),n}return o.reset=async()=>{const u=n;n=void 0,u&&await u},o}function E(e){return Array.isArray(e)?e:[e]}function re(e,n,o={}){const{immediate:u=!0}=o,i=b(!1);let d=null;function m(){d&&(clearTimeout(d),d=null)}function t(){i.value=!1,m()}function a(...l){m(),i.value=!0,d=setTimeout(()=>{i.value=!1,d=null,e(...l)},h(n))}return u&&(i.value=!0,T&&a()),V(t),{isPending:F(i),start:a,stop:t}}function le(e,n,o){return U(e,n,{...o,immediate:!0})}const j=T?window:void 0,q=T?window.navigator:void 0;function _(e){var n;const o=h(e);return(n=o==null?void 0:o.$el)!=null?n:o}function w(...e){const n=[],o=()=>{n.forEach(t=>t()),n.length=0},u=(t,a,l,p)=>(t.addEventListener(a,l,p),()=>t.removeEventListener(a,l,p)),i=B(()=>{const t=E(h(e[0])).filter(a=>a!=null);return t.every(a=>typeof a!="string")?t:void 0}),d=le(()=>{var t,a;return[(a=(t=i.value)==null?void 0:t.map(l=>_(l)))!=null?a:[j].filter(l=>l!=null),E(h(i.value?e[1]:e[0])),E(Y(i.value?e[2]:e[1])),h(i.value?e[3]:e[2])]},([t,a,l,p])=>{if(o(),!(t!=null&&t.length)||!(a!=null&&a.length)||!(l!=null&&l.length))return;const v=se(p)?{...p}:p;n.push(...t.flatMap(g=>a.flatMap(C=>l.map(k=>u(g,C,k,v)))))},{flush:"post"}),m=()=>{d(),o()};return V(o),m}let I=!1;function ce(e,n,o={}){const{window:u=j,ignore:i=[],capture:d=!0,detectIframe:m=!1}=o;if(!u)return A;if(ue&&!I){I=!0;const s={passive:!0};Array.from(u.document.body.children).forEach(r=>w(r,"click",A,s)),w(u.document.documentElement,"click",A,s)}let t=!0;const a=s=>h(i).some(r=>{if(typeof r=="string")return Array.from(u.document.querySelectorAll(r)).some(y=>y===s.target||s.composedPath().includes(y));{const y=_(r);return y&&(s.target===y||s.composedPath().includes(y))}});function l(s){const r=h(s);return r&&r.$.subTree.shapeFlag===16}function p(s,r){const y=h(s),c=y.$.subTree&&y.$.subTree.children;return c==null||!Array.isArray(c)?!1:c.some(f=>f.el===r.target||r.composedPath().includes(f.el))}const v=s=>{const r=_(e);if(s.target!=null&&!(!(r instanceof Element)&&l(e)&&p(e,s))&&!(!r||r===s.target||s.composedPath().includes(r))){if(s.detail===0&&(t=!a(s)),!t){t=!0;return}n(s)}};let g=!1;const C=[w(u,"click",s=>{g||(g=!0,setTimeout(()=>{g=!1},0),v(s))},{passive:!0,capture:d}),w(u,"pointerdown",s=>{const r=_(e);t=!a(s)&&!!(r&&!s.composedPath().includes(r))},{passive:!0}),m&&w(u,"blur",s=>{setTimeout(()=>{var r;const y=_(e);((r=u.document.activeElement)==null?void 0:r.tagName)==="IFRAME"&&!(y!=null&&y.contains(u.document.activeElement))&&n(s)},0)},{passive:!0})].filter(Boolean);return()=>C.forEach(s=>s())}function de(){const e=b(!1),n=H();return n&&Z(()=>{e.value=!0},n),e}function z(e){const n=de();return B(()=>(n.value,!!e()))}function W(e,n={}){const{controls:o=!1,navigator:u=q}=n,i=z(()=>u&&"permissions"in u),d=O(),m=typeof e=="string"?{name:e}:e,t=O(),a=()=>{var p,v;t.value=(v=(p=d.value)==null?void 0:p.state)!=null?v:"prompt"};w(d,"change",a,{passive:!0});const l=ie(async()=>{if(i.value){if(!d.value)try{d.value=await u.permissions.query(m)}catch{d.value=void 0}finally{a()}if(o)return J(d.value)}});return l(),o?{state:t,isSupported:i,query:l}:t}function fe(e={}){const{navigator:n=q,read:o=!1,source:u,copiedDuring:i=1500,legacy:d=!1}=e,m=z(()=>n&&"clipboard"in n),t=W("clipboard-read"),a=W("clipboard-write"),l=B(()=>m.value||d),p=b(""),v=b(!1),g=re(()=>v.value=!1,i,{immediate:!1});function C(){let c=!(m.value&&y(t.value));if(!c)try{n.clipboard.readText().then(f=>{p.value=f})}catch{c=!0}c&&(p.value=r())}l.value&&o&&w(["copy","cut"],C,{passive:!0});async function k(c=h(u)){if(l.value&&c!=null){let f=!(m.value&&y(a.value));if(!f)try{await n.clipboard.writeText(c)}catch{f=!0}f&&s(c),p.value=c,v.value=!0,g.start()}}function s(c){const f=document.createElement("textarea");f.value=c??"",f.style.position="absolute",f.style.opacity="0",document.body.appendChild(f),f.select(),document.execCommand("copy"),f.remove()}function r(){var c,f,P;return(P=(f=(c=document==null?void 0:document.getSelection)==null?void 0:c.call(document))==null?void 0:f.toString())!=null?P:""}function y(c){return c==="granted"||c==="prompt"}return{isSupported:l,text:p,copied:v,copy:k}}const pe={class:"icon-wrapper"},me=x({__name:"ProseCodeCopyButton",props:{content:{default:""},show:{type:Boolean,default:!1}},setup(e){const n=e,o=b(),{copy:u}=fe();ce(o,()=>{i.value==="copied"&&(i.value="init")});const i=b("init"),d=m=>{u(n.content).then(()=>{i.value="copied"}).catch(t=>{console.warn("Could not copy to clipboard!",t)})};return(m,t)=>{const a=D;return S(),M("button",{class:N(["prose-copy-code-btn",[(m.show||i.value==="copied")&&"show"]]),ref_key:"copyButtonRef",ref:o,onClick:d},[t[0]||(t[0]=R("span",{class:"sr-only"},"Copy to clipboard",-1)),R("span",pe,[L(X,{name:"fade"},{default:K(()=>[i.value==="copied"?(S(),$(a,{key:0,name:"mdi-light:clipboard-check",size:"18",class:"copied"})):(S(),$(a,{key:1,name:"mdi-light:clipboard",size:"18"}))]),_:1})])],2)}}}),ye={key:0,class:"filename"},ge=x({__name:"ProseCode",props:{code:{default:""},language:{},filename:{},highlights:{default:()=>[]}},setup(e){const n=b(!1);return(o,u)=>(S(),M("div",{class:N([[`highlight-${o.language}`],"prose-code not-prose"]),onMouseenter:u[0]||(u[0]=i=>n.value=!0),onMouseleave:u[1]||(u[1]=i=>n.value=!1)},[o.filename?(S(),M("span",ye,ee(o.filename),1)):ne("",!0),te(o.$slots,"default"),L(me,{show:n.value,content:o.code,class:"copy-button"},null,8,["show","content"])],34))}});export{ge as _};
